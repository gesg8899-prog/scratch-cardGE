<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scratch Card Animated Emoji</title>
<style>
body {
  margin: 0;
  font-family: 'Arial Black', Arial, sans-serif;
  background: #0f0f0f;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
.container {
  display: flex;
  width: 90%;
  max-width: 900px;
  border-radius: 25px;
  overflow: hidden;
  box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
}
.promo {
  flex: 1;
  background: #111;
  display: flex;
  justify-content: center;
  align-items: center;
}
.promo img { width: 100%; height: 100%; object-fit: cover; }
.scratch-container {
  flex: 1;
  background: linear-gradient(135deg, #2b0000, #4d0000);
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}
.scratch-card {
  width: 100%;
  height: 250px;
  border-radius: 20px;
  overflow: hidden;
  border: 4px solid #800000;
  box-shadow: 0 0 40px rgba(128,0,0,0.5), inset 0 0 20px rgba(0,0,0,0.6);
  background: radial-gradient(circle, #1a0f00, #2d1f00, #1a0f00);
  position: relative;
}
/* Logo */
.logo-top, .logo-bottom {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: 15;
  pointer-events: none;
}
.logo-top { top: 10px; width: 80px; }
.logo-bottom { bottom: 10px; width: 80px; }
/* Prize Hidden Until Scratch */
.prize {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 5;
  text-align:center;
}
.prize-emoji {
  font-size: 100px; /* diperbesar */
  margin-bottom: 10px;
  color: gold;
  text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 35px rgba(255,255,0,0.5);
  animation: float 2s ease-in-out infinite, glow 1.5s ease-in-out infinite alternate;
}
@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-15px); }
  100% { transform: translateY(0px); }
}
@keyframes glow {
  0% { text-shadow: 0 0 15px gold, 0 0 30px yellow; }
  50% { text-shadow: 0 0 30px gold, 0 0 50px yellow; }
  100% { text-shadow: 0 0 15px gold, 0 0 30px yellow; }
}
.prize-text { font-size: 25px; font-weight: 900; color: #ffd700; text-shadow: 0 0 10px rgba(255,215,0,0.7); }
#scratchCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: crosshair; border-radius: 18px; z-index: 10; }
.action { margin-top: 15px; }
.action button { background: linear-gradient(135deg, #800000, #8b0000); border: none; padding: 12px 25px; border-radius: 25px; font-weight: 900; font-size: 14px; color: #fff; cursor: pointer; box-shadow: 0 4px 15px rgba(128,0,0,0.5); border: 2px solid #fff; transition: all 0.3s ease; }
.action button:hover { transform: translateY(-2px); }
#popup { position: fixed; top:0; left:0; width:100%; height:100%; display:none; justify-content:center; align-items:center; background:rgba(0,0,0,0.7); z-index:200; }
#popup-content { background:#222; padding:40px 60px; border-radius:20px; text-align:center; color:gold; font-weight:900; font-size:24px; box-shadow:0 0 25px gold; transform:scale(0.4) rotateX(-30deg); transition:all 0.5s cubic-bezier(0.68,-0.55,0.265,1.55); }
#popup.show #popup-content { transform:scale(1) rotateX(0deg); }
#popup-emoji { font-size: 120px; margin-bottom: 10px; }
.close-btn { margin-top:20px; padding:10px 25px; border:none; border-radius:20px; background:linear-gradient(135deg,#800000,#8b0000); color:#fff; cursor:pointer; font-size:16px; font-weight:900; }
@media (max-width:800px){ .container { flex-direction: column; } .scratch-container { width: 100%; } }
</style>
</head>
<body>

<div class="container">
  <div class="promo">
    <img src="https://static.gwvkyk.com/media/0154a1fd89196de7b8857.jpg">
  </div>

  <div class="scratch-container">
    <div class="scratch-card">
      <div class="prize">
        <div class="prize-emoji" id="prizeEmoji">ðŸª™</div>
        <div class="prize-text" id="prizeText"></div>
      </div>
      <canvas id="scratchCanvas"></canvas>
    </div>
    <div class="action">
      <button onclick="revealAll()">REVEAL ALL</button>
    </div>
  </div>
</div>

<div id="popup">
  <div id="popup-content">
    <div id="popup-emoji"></div>
    <div id="popup-text"></div>
    <button class="close-btn" onclick="closePopup()">OK</button>
  </div>
</div>

<script>
const canvas = document.getElementById("scratchCanvas");
const ctx = canvas.getContext("2d");
let isScratching=false, prevX=0, prevY=0, popupShown=false;

function initScratch(){
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width*2;
  canvas.height = rect.height*2;
  ctx.scale(2,2);
  ctx.globalCompositeOperation="source-over";
  ctx.fillStyle="#8a8a8a";
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function scratch(e){
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX||e.touches[0].clientX)-rect.left;
  const y = (e.clientY||e.touches[0].clientY)-rect.top;
  ctx.globalCompositeOperation="destination-out";
  ctx.lineWidth=30;
  ctx.lineCap="round";
  ctx.beginPath();
  ctx.moveTo(prevX||x, prevY||y);
  ctx.lineTo(x,y);
  ctx.stroke();
  prevX=x; prevY=y;
  checkFullyScratched();
}

function revealAll(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  showPopup();
}

canvas.addEventListener("mousedown",()=>isScratching=true);
canvas.addEventListener("mouseup",()=>{isScratching=false; prevX=0; prevY=0;});
canvas.addEventListener("mousemove",(e)=>{if(isScratching) scratch(e);});
canvas.addEventListener("touchstart",(e)=>{e.preventDefault(); isScratching=true; scratch(e);});
canvas.addEventListener("touchmove",(e)=>{e.preventDefault(); if(isScratching) scratch(e);});
canvas.addEventListener("touchend",()=>{isScratching=false; prevX=0; prevY=0;});

const prizeEmoji = document.getElementById("prizeEmoji");
const prizeText = document.getElementById("prizeText");
const winPrizes = [{emoji:"ðŸª™", text:"WIN 6 SGD"}];
const losePrize = {emoji:"ðŸ˜¢", text:"TRY AGAIN"};

function pickPrize(){
  const chance = Math.random();
  if(chance<=0.4){ prizeEmoji.textContent=winPrizes[0].emoji; prizeText.textContent=winPrizes[0].text; }
  else { prizeEmoji.textContent=losePrize.emoji; prizeText.textContent=losePrize.text; }
}

function checkFullyScratched(){
  if(popupShown) return;
  const pixels = ctx.getImageData(0,0,canvas.width,canvas.height).data;
  let cleared=0;
  for(let i=3;i<pixels.length;i+=4){ if(pixels[i]===0) cleared++; }
  if(cleared/(pixels.length/4)*100>=95) showPopup();
}

function showPopup(){
  const popup=document.getElementById("popup");
  document.getElementById("popup-emoji").textContent=prizeEmoji.textContent;
  document.getElementById("popup-text").textContent=prizeText.textContent;
  popup.style.display="flex";
  setTimeout(()=>popup.classList.add("show"),50);
  popupShown=true;
}

function closePopup(){
  const popup=document.getElementById("popup");
  popup.classList.remove("show");
  setTimeout(()=>popup.style.display="none",300);
}

document.addEventListener("DOMContentLoaded",()=>{ pickPrize(); initScratch(); });
window.addEventListener("resize", initScratch);
</script>

</body>
</html>
